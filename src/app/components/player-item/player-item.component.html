<div class="card mb-2" [style.background-color]="player.color" (click)="onLoadAllDetailsForPlayer()">
    <div class="card-header p-1">
        @if (!withoutApi) {
        <img src="{{player.imageUrl}}" class="img-fluid profile-picture" alt="Responsive image"
            (error)="errorHandler($event)" (click)="onRemovePlayer()">
        }
        @if (withoutApi) {
        <div class="remove-container" alt="Spieler entfernen">
            <svg-icon (click)="onRemovePlayer()" class="player-icon" src="assets/person_remove-24px.svg">
            </svg-icon>
        </div>
        }
        <strong>{{player.name}} </strong>&nbsp;
        @if (player.status === 1) {
        <svg-icon class="nav-icon" src="assets/health_injured.svg"
            [style.color]="'#e5311c'">
        </svg-icon>
        }
        @if (player.status === 2) {
        <svg-icon class="nav-icon" src="assets/health_stricken.svg"
            [style.color]="'#d8a47d'">
        </svg-icon>
        }
        <!-- <svg-icon (click)="onRemovePlayer(player)" class="player-icon"
                                    src="assets/person_remove-24px.svg">
                                </svg-icon> -->
        @if (!isMarketOverview) {
            @if (!player.isDeactivated) {
            <svg-icon class="player-icon float-end" src="assets/check_box-24px.svg">
            </svg-icon>
            } @else {
            <svg-icon class="player-icon float-end"
                src="assets/check_box_outline_blank-24px.svg">
            </svg-icon>
            }
            @if (player.isPersitantDeleted) {
            <svg-icon (click)="onSetPlayerPermanentDeleted($event,player,false)"
                class="player-icon icon-permanent float-end" src="assets/person_remove-24px.svg"
                title="Spieler dauerhaft entfernen">
            </svg-icon>
            } @else {
            <svg-icon (click)="onSetPlayerPermanentDeleted($event,player,true)"
                class="player-icon icon-permanent float-end" src="assets/person_add-24px.svg"
                title="Spieler dauerhaft hinzufügen">
            </svg-icon>
            }
        }
    </div>
    <div class="card-body p-2">
        <div class="row">
            <div class="col-12 col-sm-6">
                @if (isMarketOverview) {
                    @if (player.price !== 0) {
                        <strong>Gebot:
                            {{player.priceString}}&nbsp;(+&nbsp;{{player.priceMarketValueDifferString}})</strong>
                    }
                    <div></div>
                    <strong>MW: {{player.marketValueString}}</strong>
                    @if (player.username.length > 0) {
                        <div></div>
                        <strong>Verkäufer: {{player.username}}</strong>
                    }
                } @else {
                    @if (!printMode) {
                    <strong>MW: {{player.marketValueString}}</strong>
                    } @else {
                    <strong>Richtpreis: {{player.priceString}}</strong>
                    }
                }
            </div>
            @if (isMarketOverview && player.stats !== null) {
            <div class="col-12 col-sm-6">
                <div></div>
                <div [style.color]="player.colorMarketValue" class="test">MW Änderung:
                    {{player.stats.realMarketValueChangeValue}}</div>
                <div></div>
                <strong [style.color]="player.expiryColor">Ablauf Datum: {{player.expiryDate}}</strong>
            </div>
            }
            @if ((player.hasOfferFromAny || withoutApi) && !printMode && !isMarketOverview) {
            <div class="col-12 col-sm-6" [style.color]="player.colorOfferValue">
                @if (withoutApi) {
                    @if (!player.isInEditMode) {
                        <strong>Angebot: {{player.valueString}}&nbsp;({{player.valuePercentString}})</strong>
                        <svg-icon (click)="onEditPlayerValue(player, $event)" class="edit-icon"
                            src="assets/create-24px.svg">
                        </svg-icon>
                    } @else {
                        <input type="number" min="0" inputmode="numeric" pattern="[0-9]*" [(ngModel)]="player.value"
                            (ngModelChange)="onPlayerValueChanged($event)" min="0" step="1000" data-number-to-fixed="2"
                            data-number-stepfactor="100" class="form-control currency" id="c2" class="player-edit"
                            (keyup.enter)="onEditPlayerValueDone(player)" />
                        <svg-icon (click)="onEditPlayerValueDone(player, $event)" class="edit-icon"
                            src="assets/done-24px.svg">
                        </svg-icon>
                    }
                } @else {
                    <strong>Angebot: {{player.valueString}}&nbsp;({{player.valuePercentString}})</strong>
                }
            </div>
            }
            @if (player.stats !== null && !printMode && !withoutApi) {
                @if (!isMarketOverview) {
                    <div class="col-12">
                        <hr />
                    </div>

                    <div class="col-12 col-sm-6">
                        Gekauft: {{player.stats.buyPriceValue}}
                    </div>
                    <div [style.color]="player.colorMarketValue" class="col-12 col-sm-6">
                        Marktwertänderung:
                        {{player.stats.realMarketValueChangeValue}}&nbsp;({{player.stats.realMarketValueChangeValuePrecent}})
                    </div>
                    <div [style.color]="player.colorOffsetValue" class="col-12 col-sm-6">
                        Verlust/Gewinn: {{player.offset}}
                    </div>

                    <div class="col-12 col-sm-6" [style.color]="player.colorSuccessValue">
                        Erfolge bei Verkauf: {{player.successValueString}}</div>
                }
                <div class="col-12">
                    <hr />
                    <h6>3 Tage Trend</h6>
                </div>
                <div class="col-12">
                    <div class="table-responsive">

                        <table class="table table-striped table-sm table-bordered">
                            <tbody>
                                <tr>
                                    @for (value of player.stats.threeDaysValues; track $index) {
                                    <td>{{value}}</td>
                                    }
                                </tr>
                                <tr>
                                    @for (value of player.stats.threeDaysValuesPercent; track $index) {
                                    <td>{{value}}</td>
                                    }
                                </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
            }
            @if (player.stats !== null && !printMode) {
                <div class="col-12">
                    <hr />
                </div>
                @if (!withoutApi) {
                <div class="col-12 col-sm-6">
                    Punkte: {{player.stats.points}}
                </div>
                }
                @if (!withoutApi) {
                <div class="col-12 col-sm-6">
                    Durchschnitt: {{player.stats.averagePoints}}
                </div>
                }
                @if (!withoutApi) {
                <div class="col-12 col-sm-6">
                    Nächste Gegner:&nbsp;
                    @for (nm of player.stats.nextThreeOpponents; track nm.imageUrl) {
                        <img src="{{nm.imageUrl}}" class="img-fluid team-picture"
                            alt="Responsive image" (error)="errorHandler($event)">

                        @if (nm.isHomeGame) {
                        <span class="next-match-homegame">(H)</span>
                        } @else {
                        <span class="next-match-homegame">(A)</span>
                        }
                    }
                </div>
                }
            }
        </div>
    </div>
</div>